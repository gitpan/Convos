.\" Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "Convos 3"
.TH Convos 3 "2014-01-28" "perl v5.18.1" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
Convos \- Multiuser IRC proxy with web interface
.SH "VERSION"
.IX Header "VERSION"
0.4
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
Convos is to a multi-user \s-1IRC\s0 Proxy, that also provides a easy to use Web
interface. Feature list:
.IP "\(bu" 4
Always online
.Sp
The backend server will keep you logged in and logs all the activity
in your archive.
.IP "\(bu" 4
Archive
.Sp
All chats will be logged and indexed, which allow you to search in
earlier conversations.
.IP "\(bu" 4
Avatars
.Sp
The chat contains profile pictures which can be retrieved from Facebook
or from gravatar.com.
.IP "\(bu" 4
Include external resources
.Sp
Links to images and video will be displayed inline. No need to click on
the link to view the data.
.SS "Running convos"
.IX Subsection "Running convos"
Convos has sane defaults so after installing Convos you should be
able to just run it:
.PP
.Vb 5
\&  # Install
\&  $ cpanm Convos
\&  # Run it
\&  $ convos backend &
\&  $ convos daemon
.Ve
.PP
The above works, but if you have a lot of users you probably want to use
hypnotoad instead of \f(CW\*(C`daemon\*(C'\fR:
.PP
.Vb 1
\&  $ hypnotoad $(which convos)
.Ve
.PP
The command above will start a full featured, \s-1UNIX\s0 optimized, preforking
non-blocking webserver. Run the same command again, and the webserver
will hot reload the source code without
loosing any connections.
.SS "Configuration"
.IX Subsection "Configuration"
You can also customize the config by setting \f(CW\*(C`MOJO_CONFIG\*(C'\fR before
running any of the commands above. Example:
.PP
.Vb 1
\&  $ MOJO_CONFIG=$HOME/.convos.conf convos daemon
.Ve
.PP
You can use <https://github.com/Nordaaker/convos/blob/release/convos.conf>
as config file template.
.SS "Architecture principles"
.IX Subsection "Architecture principles"
.IP "\(bu" 4
Keep the \s-1JS\s0 simple and manageable
.IP "\(bu" 4
Use Redis to manage state / publish subscribe
.IP "\(bu" 4
Archive logs in plain text format, use ack to search them.
.IP "\(bu" 4
Bootstrap-based user interface
.SS "Environment"
.IX Subsection "Environment"
Convos can be configured with the following environment variables:
.IP "\(bu" 4
CONVOS_BACKEND_EMBEDDED=1
.Sp
Set \s-1CONVOS_MANUAL_BACKEND\s0 to a true value if you're starting Convos
with \f(CW\*(C`morbo\*(C'\fR and want to run the backend embedded.
.IP "\(bu" 4
CONVOS_DEBUG=1
.Sp
Set \s-1CONVOS_DEBUG\s0 for extra debug output to \s-1STDERR.\s0
.IP "\(bu" 4
CONVOS_MANUAL_BACKEND=1
.Sp
Disable the frontend from starting the backend.
.IP "\(bu" 4
CONVOS_PING_INTERVAL=30
.Sp
Set how often to send \*(L"keep-alive\*(R" through the web socket. Default is
every 30 second.
.IP "\(bu" 4
MOJO_IRC_DEBUG=1
.Sp
Set \s-1MOJO_IRC_DEBUG\s0 for extra \s-1IRC\s0 debug output to \s-1STDERR.\s0
.SH "RESOURCES"
.IX Header "RESOURCES"
.IP "\(bu" 4
Homepage: <http://convos.by>
.IP "\(bu" 4
Project page: <https://github.com/Nordaaker/convos>
.IP "\(bu" 4
Icon: <https://raw.github.com/Nordaaker/convos/master/public/image/icon.svg>
.IP "\(bu" 4
Logo: <https://raw.github.com/Nordaaker/convos/master/public/image/logo.svg>
.SH "SEE ALSO"
.IX Header "SEE ALSO"
.IP "\(bu" 4
Convos::Archive
.Sp
Mojolicious controller for \s-1IRC\s0 logs.
.IP "\(bu" 4
Convos::Client
.Sp
Mojolicious controller for \s-1IRC\s0 chat.
.IP "\(bu" 4
Convos::User
.Sp
Mojolicious controller for user data.
.IP "\(bu" 4
Convos::Core
.Sp
Backend functionality.
.SH "ATTRIBUTES"
.IX Header "ATTRIBUTES"
.SS "archive"
.IX Subsection "archive"
Holds a Convos::Core::Archive object.
.SS "cache"
.IX Subsection "cache"
Holds a Mojolicious::Static object pointing to a cache dir.
The directory is \*(L"/tmp/convos\*(R" by default.
.SS "core"
.IX Subsection "core"
Holds a Convos::Core object.
.SS "upgrader"
.IX Subsection "upgrader"
Holds a Convos::Upgrader object.
.SH "METHODS"
.IX Header "METHODS"
.SS "startup"
.IX Subsection "startup"
This method will run once at server start
.SH "COPYRIGHT AND LICENSE"
.IX Header "COPYRIGHT AND LICENSE"
Copyright (C) 2012\-2013, Nordaaker.
.PP
This program is free software, you can redistribute it and/or modify it under
the terms of the Artistic License version 2.0.
.SH "AUTHOR"
.IX Header "AUTHOR"
Jan Henning Thorsen \- \f(CW\*(C`jhthorsen@cpan.org\*(C'\fR
.PP
Marcus Ramberg \- \f(CW\*(C`marcus@nordaaker.com\*(C'\fR
